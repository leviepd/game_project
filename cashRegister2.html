<!DOCTYPE html>

<html>

<head>

<p>Cash Register</p>

Enter Item, Quantity: <input id=command onchange="input_data(this)">

<div id=output></div>

</head>

<body>

<script>

write = function(s) {
	var h = document.getElementById("output").innerHTML;
	document.getElementById("output").innerHTML = h + "<br>" + s;
	// why is <br> in quatations??
}

// Data 

snes = {
	name: "snes",
	price: 75,
};

sega = {
	name: "sega",
	price: 40,
};

gamecube = {
	name: "gamecube",
	price: 40,
};

ps1 = {
	name: "ps1",
	price: 40,
};

products = [snes, sega, gamecube, ps1];

// Order Holds The Data

order = {
	customer: "Billy Bob",
	lines: [
	/*	{
		product: sega,
		qty: 1, 
		subtotal: 7500,
		} */
	]
}

// Do's... If type customer name, then create a new order
// When finished with the order store the order in seperate location (maybe an array for now)
// Be able to clear the order

// Inputs handle_data into HTML

function input_data(element) {
	handle_data(element.value);
	element.value = "";
	element.scrollIntoView();
}

function new_order(a, b) {
	a = {
		customer: b,
		lines: [],
	}
	write(a.customer);
}

// Calculates Item's Subtotal

function sub_total(prod) {
	write("Product: " + prod.name);
	write("Price: " + prod.price);
	var l = {
		product: prod,
		qty: num,
		sub: prod.price * num,
	}
	// l for "lines"...
	order.lines.push(l);
	// pushes l into "lines" array.
}

// Calculates Order Total

total = 0;

calcTot = function() {
	var i;
	for(var i = 0; i < order.lines.length; i++) {
		total += order.lines[i].sub;
	}
	write("");
	write("Customer: " + order.customer);
	write("Total: " + total);
};

// Handles the Data

handle_data = function(data) {
	data = data.toLowerCase();
	data = data.split(" ");  // ["", ""]
	entry = data[0];
	num = parseInt(data[1]);

	var i;
	for(i = 0; i < products.length; i++) {
		var prod = products[i];
	if(entry === prod.name) {
		if(num === undefined) {
			write("You have to enter the item, and the item's quantity.");
		}
		else { // num is defined
			sub_total(prod);
		}
	}
	}
	if(entry === "subtotal") {
		var i;
		for(i = 0; i < order.lines.length; i++) {
			write("");
			write("Product: " + order.lines[i].product.name);
			write("Quantity: " + order.lines[i].qty);
			write("Subtotal: " + order.lines[i].sub);
		}
	}
	else 
	if(entry === "total") {
		calcTot();
	}
};



</script>

</body>

</html>



